<html>
<head>
</head>

<body>
<h1 id="message"></h1>

<h2 id="message2"></h2>

<button onload="send()" onclick="myFunction()">Clear the canvas</button> 

<script src="https://cdn.socket.io/4.3.2/socket.io.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js" integrity="sha512-NxocnqsXP3zm0Xb42zqVMvjQIktKEpTIbCXXyhBPxqGZHqhcOXHs4pXI/GoZ8lE+2NJONRifuBpi9DxC58L0Lw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>

let user = prompt('Enter a username')

var socket;

function send(){
  socket.emit('user', user)
}



function myFunction(){
  var clear2 = 0
  clear();
  background(51)

  socket.emit('clear', clear2)

  socket.emit('refresh', 'refresh please')
}

function setup(){
  createCanvas(1200, 800);
  background(51)

  socket = io.connect('http://pinky.uk.to:5000')
  socket.on('incords', Pinky)
  socket.on('sketch', start)
  socket.on('reload', yes)
  socket.on('userdata', printthis)
}

function printthis(data){
  console.log(data)
}

function yes(data){
  alert(data)
}

function start(data){
  for (let i = 0; i < data.length; i++) {
  // console.log(data[i]);
  noStroke()
  fill(100,0,100)
  setTimeout(() => {
    ellipse(data[i].x, data[i].y, 36, 36)
  }, 1000);
}}

function Pinky(data){
    noStroke()
    fill(255)
    ellipse(data.x, data.y, 36, 36)
}

function mouseDragged(){

  var data = {
    x: mouseX,
    y: mouseY
  }

  socket.emit('mouse', data)

  noStroke()
  fill(255)
  ellipse(mouseX, mouseY, 36, 36)
}



</script>
</body>
</html>
